5120000 bytes (5.1 MB) copied, 0.0282254 s, 181 MB/s
dd if=bootblock of=xv6.img conv=notrunc
1+0 records in
1+0 records out
512 bytes (512 B) copied, 0.00152179 s, 336 kB/s
dd if=kernel of=xv6.img seek=1 conv=notrunc
379+1 records in
379+1 records out
194253 bytes (194 kB) copied, 0.00264867 s, 73.3 MB/s
qemu-system-i386 -nographic -drive file=fs.img,index=1,media=disk,format=raw -drive file=xv6.img,index=0,media=disk,format=raw -smp 2 -m 512 
xv6...
cpu1: starting
cpu0: starting
sb: size 1000 nblocks 941 ninodes 200 nlog 30 logstart 2 inodestart 32 bmap start 58
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
icurr pid: 0
ncurr pid: 0
icurr pid: 0
tcurr pid: 0
:curr pid: 0
 curr pid: 0
scurr pid: 0
tcurr pid: 0
acurr pid: 0
rcurr pid: 0
tcurr pid: 0
icurr pid: 0
ncurr pid: 0
gcurr pid: 0
 curr pid: 0
scurr pid: 0
hcurr pid: 0

curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
$curr pid: 0
 curr pid: 0
strace on
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
$curr pid: 0
 curr pid: 0
strace dump
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
DUMP: pid = 2 | command name = init | syscall = exec | return value = 2
 curr pid: 0
curr pid: 0
$curr pid: 0
 curr pid: 0
strace -c echo hi
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 5
in report tracking
curr pid: 5
hin report tracking
curr pid: 5
iin report tracking
curr pid: 5

in report tracking
curr pid: 5
SYSCALL          CALLS   ERRORS          ELAPSED CPU CYCLES 
------   -------         ------          ------------ 
exec     1       0       %l
 write   3       0       %l
 ------          -------         ------          ------------ 
total    4       0       %l 
in report dump
curr pid: 0
$curr pid: 0
 curr pid: 0
strace run echo hi
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
hcurr pid: 0
icurr pid: 0

curr pid: 0
TRACE: pid = 5 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 6 | command name = echo | syscall = exit 
curr pid: 0
$curr pid: 0
 curr pid: 0
echo hi
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
hcurr pid: 0
icurr pid: 0

curr pid: 0
TRACE: pid = 7 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 7 | command name = echo | syscall = exit 
curr pid: 0
$curr pid: 0
 curr pid: 0
strace -c trace_fork
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 8
in report tracking
curr pid: 8
in report tracking
curr pid: 8
curr pid: 8
Cin report tracking
curr pid: 8

in report tracking
curr pid: 8
in report tracking
curr pid: 8
curr pid: 8
Gin report tracking
curr pid: 8

in report tracking
curr pid: 8
in report tracking
curr pid: 8
in report tracking
curr pid: 8
Pin report tracking
curr pid: 8

in report tracking
curr pid: 8
SYSCALL          CALLS   ERRORS          ELAPSED CPU CYCLES 
------   -------         ------          ------------ 
exec     2       0       %l
 fork    5       0       %l
 write   6       0       %l
 wait    2       0       %l
 ------          -------         ------          ------------ 
total    15      0       %l 
in report dump
curr pid: 0
$curr pid: 0
 curr pid: 0
strace -e write
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
inside sysproc: write
curr pid: 0
curr pid: 0
$curr pid: 0
 curr pid: 0
echo hi
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
curr pid: 0
hcurr pid: 0
icurr pid: 0

curr pid: 0
TRACE: pid = 8 | command name = trace_fork | syscall = exec | return value = 0
 TRACE: pid = 8 | command name = trace_fork | syscall = fork | return value = 0
 TRACE: pid = 9 | command name = trace_fork | syscall = write | return value = 0
 TRACE: pid = 9 | command name = trace_fork | syscall = write | return value = 0
 TRACE: pid = 9 | command name = trace_fork | syscall = fork | return value = 0
 TRACE: pid = 10 | command name = trace_fork | syscall = write | return value = 0
 TRACE: pid = 10 | command name = trace_fork | syscall = write | return value = 0
 TRACE: pid = 9 | command name = trace_fork | syscall = wait | return value = 0
 TRACE: pid = 8 | command name = trace_fork | syscall = wait | return value = 0
 TRACE: pid = 8 | command name = trace_fork | syscall = write | return value = 0
 TRACE: pid = 8 | command name = trace_fork | syscall = write | return value = 0
 TRACE: pid = 12 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 12 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 12 | command name = echo | syscall = write | return value = 0
 in format dump
curr pid: 0
$curr pid: 0
 curr pid: 0
xQEMU: Terminated
$ make qemu-nox
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o syscall.o syscall.c
ld -m    elf_i386 -T kernel.ld -o kernel entry.o bio.o console.o exec.o file.o fs.o ide.o ioapic.o kalloc.o kbd.o lapic.o log.o main.o mp.o picirq.o pipe.o proc.o sleeplock.o spinlock.o string.o swtch.o syscall.o sysfile.o sysproc.o timer.o trapasm.o trap.o uart.o vectors.o vm.o  -b binary initcode entryother
objdump -S kernel > kernel.asm
objdump -t kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$/d' > kernel.sym
dd if=/dev/zero of=xv6.img count=10000
10000+0 records in
10000+0 records out
5120000 bytes (5.1 MB) copied, 0.0296098 s, 173 MB/s
dd if=bootblock of=xv6.img conv=notrunc
1+0 records in
1+0 records out
512 bytes (512 B) copied, 0.00162446 s, 315 kB/s
dd if=kernel of=xv6.img seek=1 conv=notrunc
379+1 records in
379+1 records out
194213 bytes (194 kB) copied, 0.00264533 s, 73.4 MB/s
qemu-system-i386 -nographic -drive file=fs.img,index=1,media=disk,format=raw -drive file=xv6.img,index=0,media=disk,format=raw -smp 2 -m 512 
xv6...
cpu1: starting
cpu0: starting
sb: size 1000 nblocks 941 ninodes 200 nlog 30 logstart 2 inodestart 32 bmap start 58
init: starting sh
$ strace on
$ echo hi
hi
TRACE: pid = 4 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 4 | command name = echo | syscall = exit 
$ strace -e write
inside sysproc: write
$ echo hi
hi
TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 in format dump
$ strace -c echo hello
hello
SYSCALL CALLS    ERRORS ELAPSED CPU CYCLES 
------   -------         ------          ------------ 
exec     1       0       63708126
 write   6       0       10407208
 ------          -------         ------          ------------ 
total    7       0       %l 
in report dump
$ echo hello
hello
TRACE: pid = 7 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 8 | command name = echo | syscall = exit 
$ echo hello
hello
TRACE: pid = 9 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 9 | command name = echo | syscall = exit 
$ strace -c echo hi  
hi
SYSCALL CALLS    ERRORS ELAPSED CPU CYCLES 
------   -------         ------          ------------ 
exec     2       0       158669584
 write   9       0       20437500
 ------          -------         ------          ------------ 
total    11      0       %l 
in report dump
$ echo hi
exec secho failed
$ echo hi
hi
TRACE: pid = 10 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 10 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 10 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 10 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 12 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 12 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 12 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 12 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 12 | command name = echo | syscall = exit 
$ QEMU: Terminated
$ make qemu-nox
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o syscall.o syscall.c
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o sysproc.o sysproc.c
ld -m    elf_i386 -T kernel.ld -o kernel entry.o bio.o console.o exec.o file.o fs.o ide.o ioapic.o kalloc.o kbd.o lapic.o log.o main.o mp.o picirq.o pipe.o proc.o sleeplock.o spinlock.o string.o swtch.o syscall.o sysfile.o sysproc.o timer.o trapasm.o trap.o uart.o vectors.o vm.o  -b binary initcode entryother
objdump -S kernel > kernel.asm
objdump -t kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$/d' > kernel.sym
dd if=/dev/zero of=xv6.img count=10000
10000+0 records in
10000+0 records out
5120000 bytes (5.1 MB) copied, 0.0291024 s, 176 MB/s
dd if=bootblock of=xv6.img conv=notrunc
1+0 records in
1+0 records out
512 bytes (512 B) copied, 0.00158433 s, 323 kB/s
dd if=kernel of=xv6.img seek=1 conv=notrunc
379+1 records in
379+1 records out
194181 bytes (194 kB) copied, 0.00264421 s, 73.4 MB/s
qemu-system-i386 -nographic -drive file=fs.img,index=1,media=disk,format=raw -drive file=xv6.img,index=0,media=disk,format=raw -smp 2 -m 512 
xv6...
cpu1: starting
cpu0: starting
sb: size 1000 nblocks 941 ninodes 200 nlog 30 logstart 2 inodestart 32 bmap start 58
init: starting sh
$ strace on
$ echo hi
hi
TRACE: pid = 4 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 4 | command name = echo | syscall = exit 
$ echo hi
hi
TRACE: pid = 5 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 5 | command name = echo | syscall = exit 
$ strace -e write
$ echo hi
hi
TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 in format dump
$ echo hi
hi
TRACE: pid = 8 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 8 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 8 | command name = echo | syscall = exit 
$ strace -c echo hi
in report tracking
hin report tracking
iin report tracking

in report tracking
SYSCALL  CALLS   ERRORS  ELAPSED CPU CYCLES 
------   -------         ------  ------------
exec     1       0       77729167
 write   3       0       23055251
 ------  -------         ------  ------------
total    4       0       100784418 
in report dump
$ echo hi
hi
TRACE: pid = 9 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 10 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 10 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 10 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 10 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 10 | command name = echo | syscall = exit 
$ echo hi
hi
TRACE: pid = 11 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 11 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 11 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 11 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 11 | command name = echo | syscall = exit 
$ strace off
$ echo hi
hi
$ strace -c echo hi
in report tracking
hin report tracking
iin report tracking

in report tracking
$ strace on
$ strace -c trace_fork
in report tracking
in report tracking
Cin report tracking

in report tracking
in report tracking
Gin report tracking

in report tracking
in report tracking
in report tracking
Pin report tracking

in report tracking
$ echo hi
hi
$ strace -e write
e$ cho
$ echo hi
hi
$ strace on
$ echo hi
hi
$ QEMU: Terminated
$ make
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o syscall.o syscall.c
syscall.c: In function 'syscall':
syscall.c:346:5: error: passing argument 1 of 'strlen' from incompatible pointer type [-Werror]
     if (proc->report && (proc->pid != curr_pid || memcmp(syscalls[num](), "exit", strlen(syscalls[num]))))
     ^
In file included from syscall.c:2:0:
defs.h:143:17: note: expected 'const char *' but argument is of type 'int (*)(void)'
 int             strlen(const char*);
                 ^
syscall.c:346:5: error: passing argument 1 of 'memcmp' makes pointer from integer without a cast [-Werror]
     if (proc->report && (proc->pid != curr_pid || memcmp(syscalls[num](), "exit", strlen(syscalls[num]))))
     ^
In file included from syscall.c:2:0:
defs.h:139:17: note: expected 'const void *' but argument is of type 'int'
 int             memcmp(const void*, const void*, uint);
                 ^
cc1: all warnings being treated as errors
make: *** [syscall.o] Error 1
$ maker
/bin/sh: 28: maker: not found
$ make
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o syscall.o syscall.c
syscall.c: In function 'syscall':
syscall.c:346:5: error: passing argument 1 of 'memcmp' makes pointer from integer without a cast [-Werror]
     if (proc->report && (proc->pid != curr_pid || memcmp(syscalls[num](), "exit", strlen("exit"))))
     ^
In file included from syscall.c:2:0:
defs.h:139:17: note: expected 'const void *' but argument is of type 'int'
 int             memcmp(const void*, const void*, uint);
                 ^
cc1: all warnings being treated as errors
make: *** [syscall.o] Error 1
$ make
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o syscall.o syscall.c
syscall.c: In function 'syscall':
syscall.c:346:77: error: called object is not a function or function pointer
     if (proc->report && (proc->pid != curr_pid || memcmp(syscalls_names[num](), "exit", strlen("exit"))))
                                                                             ^
make: *** [syscall.o] Error 1
$ make
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o syscall.o syscall.c
ld -m    elf_i386 -T kernel.ld -o kernel entry.o bio.o console.o exec.o file.o fs.o ide.o ioapic.o kalloc.o kbd.o lapic.o log.o main.o mp.o picirq.o pipe.o proc.o sleeplock.o spinlock.o string.o swtch.o syscall.o sysfile.o sysproc.o timer.o trapasm.o trap.o uart.o vectors.o vm.o  -b binary initcode entryother
objdump -S kernel > kernel.asm
objdump -t kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$/d' > kernel.sym
dd if=/dev/zero of=xv6.img count=10000
10000+0 records in
10000+0 records out
5120000 bytes (5.1 MB) copied, 0.0298938 s, 171 MB/s
dd if=bootblock of=xv6.img conv=notrunc
1+0 records in
1+0 records out
512 bytes (512 B) copied, 0.00156267 s, 328 kB/s
dd if=kernel of=xv6.img seek=1 conv=notrunc
379+1 records in
379+1 records out
194261 bytes (194 kB) copied, 0.00274658 s, 70.7 MB/s
$ make qemu-nox
qemu-system-i386 -nographic -drive file=fs.img,index=1,media=disk,format=raw -drive file=xv6.img,index=0,media=disk,format=raw -smp 2 -m 512 
xv6...
cpu1: starting
cpu0: starting
sb: size 1000 nblocks 941 ninodes 200 nlog 30 logstart 2 inodestart 32 bmap start 58
init: starting sh
$ strace on
$ echo hello
hello
TRACE: pid = 4 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 4 | command name = echo | syscall = exit 
$ echo hello
hello
TRACE: pid = 5 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 5 | command name = echo | syscall = exit 
$ strace -c echo hello
in report tracking
hin report tracking
ein report tracking
lin report tracking
lin report tracking
oin report tracking

in report tracking
syscall          calls   errors          elapsed cycles 
------   -------         ------          ------
exec     1       0       59424834
 write   6       0       22883583
 ------          -------         ------          ------
total    7       0       82308417 
in report dump
$ echo hi
hi
TRACE: pid = 6 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 6 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 in format dump
TRACE: pid = 7 | command name = echo | syscall = exit 
$ strace -e write
$ echo hello
hello
TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 9 | command name = echo | syscall = write | return value = 0
 in format dump
$ strace -c cat RAEDME
in report tracking
in report tracking
cin report tracking
ain report tracking
tin report tracking
:in report tracking
 in report tracking
cin report tracking
ain report tracking
nin report tracking
nin report tracking
oin report tracking
tin report tracking
 in report tracking
oin report tracking
pin report tracking
ein report tracking
nin report tracking
 in report tracking
Rin report tracking
Ain report tracking
Ein report tracking
Din report tracking
Min report tracking
Ein report tracking

in report tracking
syscall          calls   errors          elapsed cycles 
------   -------         ------          ------
exec     2       0       256988584
 open    7       0       24371124
 write   24      0       39977874
 ------          -------         ------          ------
total    33      0       321337582 
in report dump
$ cat README
Hello from the README file! 
TRACE: pid = 10 | command name = cat | syscall = exec | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = open | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 10 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = exec | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = open | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = read | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = read | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = close | return value = 0
 in format dump
TRACE: pid = 11 | command name = cat | syscall = exit 
$ QEMU: Terminated
$ make qemu-nox
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o syscall.o syscall.c
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o sysproc.o sysproc.c
ld -m    elf_i386 -T kernel.ld -o kernel entry.o bio.o console.o exec.o file.o fs.o ide.o ioapic.o kalloc.o kbd.o lapic.o log.o main.o mp.o picirq.o pipe.o proc.o sleeplock.o spinlock.o string.o swtch.o syscall.o sysfile.o sysproc.o timer.o trapasm.o trap.o uart.o vectors.o vm.o  -b binary initcode entryother
objdump -S kernel > kernel.asm
objdump -t kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$/d' > kernel.sym
dd if=/dev/zero of=xv6.img count=10000
10000+0 records in
10000+0 records out
5120000 bytes (5.1 MB) copied, 0.0289788 s, 177 MB/s
dd if=bootblock of=xv6.img conv=notrunc
1+0 records in
1+0 records out
512 bytes (512 B) copied, 0.00164621 s, 311 kB/s
dd if=kernel of=xv6.img seek=1 conv=notrunc
379+1 records in
379+1 records out
194269 bytes (194 kB) copied, 0.00274225 s, 70.8 MB/s
qemu-system-i386 -nographic -drive file=fs.img,index=1,media=disk,format=raw -drive file=xv6.img,index=0,media=disk,format=raw -smp 2 -m 512 
xv6...
cpu1: starting
cpu0: starting
sb: size 1000 nblocks 941 ninodes 200 nlog 30 logstart 2 inodestart 32 bmap start 58
init: starting sh
$ strace on
$ QEMU: Terminated
$ make qemu-nox
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o syscall.o syscall.c
ld -m    elf_i386 -T kernel.ld -o kernel entry.o bio.o console.o exec.o file.o fs.o ide.o ioapic.o kalloc.o kbd.o lapic.o log.o main.o mp.o picirq.o pipe.o proc.o sleeplock.o spinlock.o string.o swtch.o syscall.o sysfile.o sysproc.o timer.o trapasm.o trap.o uart.o vectors.o vm.o  -b binary initcode entryother
objdump -S kernel > kernel.asm
objdump -t kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$/d' > kernel.sym
dd if=/dev/zero of=xv6.img count=10000
10000+0 records in
10000+0 records out
5120000 bytes (5.1 MB) copied, 0.028457 s, 180 MB/s
dd if=bootblock of=xv6.img conv=notrunc
1+0 records in
1+0 records out
512 bytes (512 B) copied, 0.00160996 s, 318 kB/s
dd if=kernel of=xv6.img seek=1 conv=notrunc
379+1 records in
379+1 records out
194221 bytes (194 kB) copied, 0.00266212 s, 73.0 MB/s
qemu-system-i386 -nographic -drive file=fs.img,index=1,media=disk,format=raw -drive file=xv6.img,index=0,media=disk,format=raw -smp 2 -m 512 
xv6...
cpu1: starting
cpu0: starting
sb: size 1000 nblocks 941 ninodes 200 nlog 30 logstart 2 inodestart 32 bmap start 58
init: starting sh
$ strace on
$ echo hi
hi
TRACE: pid = 4 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 4 | command name = echo | syscall = exit 
$ echo hi
hi
TRACE: pid = 5 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = exit 
$ strace -c echo hi
in report tracking
hin report tracking
iin report tracking

in report tracking
syscall | calls | errors | elapsed cycles 
-------------------------------------
exec     1       0       66034042
 write   3       0       51574084
 -------------------------------------
total    4       0       117608126 
$ echo hi
hi
TRACE: pid = 7 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 7 | command name = echo | syscall = exit 
$ strace -c cat README
in report tracking
in report tracking
in report tracking
Hello from the README file! 
in report tracking
in report tracking
in report tracking
syscall | calls | errors | elapsed cycles 
-------------------------------------
exec     2       0       249301834
 open    4       0       52130959
 read    2       0       4067375
 write   1       0       17172375
 close   1       0       335166
 -------------------------------------
total    10      0       323007709 
$ cat REAADME
cat: cannot open REAADME
TRACE: pid = 9 | command name = cat | syscall = exec | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = open | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 9 | command name = cat | syscall = exit 
$ strace -c cat README
in report tracking
in report tracking
in report tracking
Hello from the README file! 
in report tracking
in report tracking
in report tracking
syscall | calls | errors | elapsed cycles 
-------------------------------------
exec     3       0       326968376
 open    5       0       52609793
 read    4       0       4251459
 write   2       0       33283041
 close   2       0       378791
 -------------------------------------
total    16      0       417491460 
$ cat README
Hello from the README file! 
TRACE: pid = 11 | command name = cat | syscall = exec | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = open | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = read | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = write | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = read | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = close | return value = 0
 TRACE: pid = 11 | command name = cat | syscall = exit 
$ strace dump
DUMP: pid = 9 | command name = cat | syscall = write | return value = 0
 DUMP: pid = 9 | command name = cat | syscall = write | return value = 1
 DUMP: pid = 9 | command name = cat | syscall = write | return value = 1
 DUMP: pid = 9 | command name = cat | syscall = write | return value = 1
 DUMP: pid = 9 | command name = cat | syscall = write | return value = 1
 DUMP: pid = 9 | command name = cat | syscall = write | return value = 1
 DUMP: pid = 9 | command name = cat | syscall = write | return value = 1
 DUMP: pid = 9 | command name = cat | syscall = exit | return value = 1
 DUMP: pid = 10 | command name = cat | syscall = open | return value = 0
 DUMP: pid = 10 | command name = cat | syscall = read | return value = 3
 DUMP: pid = 10 | command name = cat | syscall = write | return value = 29
 DUMP: pid = 10 | command name = cat | syscall = read | return value = 29
 DUMP: pid = 10 | command name = cat | syscall = close | return value = 0
 DUMP: pid = 10 | command name = cat | syscall = exit | return value = 0
 DUMP: pid = 11 | command name = cat | syscall = open | return value = 0
 DUMP: pid = 11 | command name = cat | syscall = read | return value = 3
 DUMP: pid = 11 | command name = cat | syscall = write | return value = 29
 DUMP: pid = 11 | command name = cat | syscall = read | return value = 29
 DUMP: pid = 11 | command name = cat | syscall = close | return value = 0
 DUMP: pid = 11 | command name = cat | syscall = exit | return value = 0
 $ QEMU: Terminated
$ make qemu-nox
gcc -fno-pic -static -fno-builtin -fno-strict-aliasing -O2 -Wall -MD -ggdb -m32 -Werror -fno-omit-frame-pointer -fno-stack-protector   -c -o syscall.o syscall.c
ld -m    elf_i386 -T kernel.ld -o kernel entry.o bio.o console.o exec.o file.o fs.o ide.o ioapic.o kalloc.o kbd.o lapic.o log.o main.o mp.o picirq.o pipe.o proc.o sleeplock.o spinlock.o string.o swtch.o syscall.o sysfile.o sysproc.o timer.o trapasm.o trap.o uart.o vectors.o vm.o  -b binary initcode entryother
objdump -S kernel > kernel.asm
objdump -t kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$/d' > kernel.sym
dd if=/dev/zero of=xv6.img count=10000
10000+0 records in
10000+0 records out
5120000 bytes (5.1 MB) copied, 0.029392 s, 174 MB/s
dd if=bootblock of=xv6.img conv=notrunc
1+0 records in
1+0 records out
512 bytes (512 B) copied, 0.00173417 s, 295 kB/s
dd if=kernel of=xv6.img seek=1 conv=notrunc
379+1 records in
379+1 records out
194197 bytes (194 kB) copied, 0.00277133 s, 70.1 MB/s
qemu-system-i386 -nographic -drive file=fs.img,index=1,media=disk,format=raw -drive file=xv6.img,index=0,media=disk,format=raw -smp 2 -m 512 
xv6...
cpu1: starting
cpu0: starting
sb: size 1000 nblocks 941 ninodes 200 nlog 30 logstart 2 inodestart 32 bmap start 58
init: starting sh
$ strace on
$ strace -c echo hello
hello
syscall | calls | errors | elapsed cycles 
-------------------------------------
exec     1       0       233440834
 write   6       0       800414
 -------------------------------------
total    7       0       234241248 
$ echo hello
hello
TRACE: pid = 5 | command name = echo | syscall = exec | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = write | return value = 0
 TRACE: pid = 5 | command name = echo | syscall = exit 
$ strace -c echo hello
hello
syscall | calls | errors | elapsed cycles 
-------------------------------------
exec     2       0       343815084
 write   12      0       11197083
 -------------------------------------
total    14      0       355012167 
$  
